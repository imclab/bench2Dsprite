<body>
	<script src="../vendor/requestanimationframe.js"></script>
	<script src="../vendor/Stats.js"></script>
	<script src="../assets/js/utils.js"></script>
	<script>
		function bench(nImages, nSeconds, callback){
			var images	= [];
			var url		= "../assets/images/logo128.png";
			for(var i = 0; i < nImages; i++){
				loadImage(url, function(image){
					image.style.position	= "absolute";
					document.body.appendChild(image);
					images.push(image);
				});
			};
	
			var timeStart	= Date.now();
			var nFrame	= 0;
			requestAnimationFrame(anim);
			function anim(){
				var deltaSeconds= (Date.now() - timeStart)/1000
				if( deltaSeconds > nSeconds && timeStart ){
					console.log("nFrame", nFrame);
					console.log("nImages", nImages);
					console.log("deltaSeconds", deltaSeconds);
					var imageSecond	= (nFrame*nImages)/deltaSeconds;
					callback && callback(imageSecond, nFrame, nImages);
					return;
				}

				requestAnimationFrame(anim);

				var speed	= Date.now()/10;
				for(var i = 0; i < nImages; i++){
					var image	= images[i];
					if(!image)	return;
					image.style.left= Math.floor(speed+i)*3	% 900;
					image.style.top	= Math.floor(speed+i)	% 500;
				}
				nFrame++;
			}			
		}
		bench(1200,2,function(imagesSeconds, nFrame, nImages){
			console.log(imagesSeconds, imagesSeconds/30)
		});
	</script>
</body>